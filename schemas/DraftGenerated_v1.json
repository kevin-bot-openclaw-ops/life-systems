{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://life-systems.local/schemas/DraftGenerated_v1.json",
  "title": "DraftGenerated",
  "description": "Application draft generated and humanized",
  "type": "object",
  "required": ["event_type", "version", "timestamp", "context", "payload"],
  "properties": {
    "event_type": {
      "type": "string",
      "const": "DraftGenerated"
    },
    "version": {
      "type": "string",
      "const": "v1"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "context": {
      "type": "string",
      "const": "APPL"
    },
    "payload": {
      "type": "object",
      "required": ["draft_id", "listing_id", "company", "role", "draft_text", "humanizer_pass", "ai_tells_detected", "word_count", "variant"],
      "properties": {
        "draft_id": {
          "type": "string",
          "format": "uuid"
        },
        "listing_id": {
          "type": "string",
          "format": "uuid"
        },
        "company": {
          "type": "string"
        },
        "role": {
          "type": "string"
        },
        "draft_text": {
          "type": "string",
          "maxLength": 2000
        },
        "humanizer_pass": {
          "type": "boolean"
        },
        "ai_tells_detected": {
          "type": "integer",
          "minimum": 0
        },
        "word_count": {
          "type": "integer",
          "minimum": 0
        },
        "variant": {
          "type": "string",
          "enum": ["fintech", "ml_research", "platform", "general"]
        }
      }
    }
  }
}
